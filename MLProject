name: MACE
conda_env: conda.yaml

entry_points:
  main:
    parameters:
      batch_size: { type: int, default: 4 }
      max_num_epochs: { type: int, default: 500 }
      device: { type: str, default: cuda }
      train_file: { type: path, default: qmc/training.xyz }
      valid_file: { type: path, default: qmc/testing.xyz }
      r_max: { type: float, default: 3.0 }
      forces_weight: { type: float, default: 20.0 }
      energy_weight: { type: float, default: 1.0 }
    command: "python scripts/run_train.py \
      --name='hydrogen' \
      --train_file='{valid_file}' \
      --E0s='average' \
      --model='MACE' \
      --hidden_irreps='64x0e + 64x1o' \
      --r_max={r_max} \
      --default_dtype='float32' \
      --batch_size={batch_size} \
      --valid_batch_size=4 \
      --max_num_epochs={max_num_epochs} \
      --energy_weight={energy_weight} \
      --forces_weight={forces_weight} \
      --ema \
      --ema_decay=0.99 \
      --amsgrad \
      --restart_latest \
      --device={device} \
      --mlflow=true
      "
<<<<<<< HEAD
=======
  calculator:
    parameters:
      run_id: { type: str, default: d17b475d94ce4279ba2ef6f6e494f3ef }
      device: { type: str, default: cuda }
      test_file: { type: path, default: qmc/testing.xyz }
      output_file: { type: path, default: output.xyz }
    command: "python calc_test.py --run_id={run_id} --device={device} --test_file={test_file} --output_file={output_file}"
  search:
    parameters:
      num_runs: { type: int, default: 2 }
      train_backend_config: { type: path, default: slurm_config.json }
      train_file: { type: path, default: qmc/training.xyz }
      valid_file: { type: path, default: qmc/testing.xyz }
    command: "python search.py --num_runs={num_runs} --train_backend_config={train_backend_config} --train_file={train_file} --valid_file={valid_file}"
>>>>>>> e28185c (change param types)
